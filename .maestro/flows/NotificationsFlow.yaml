#flow: VietLocalGo Notifications Flow
#intent:
# Test opening notifications and navigating via a booking notification

appId: ${MAESTRO_APP_ID}
onFlowStart:
  - runFlow: ../shared/_OnFlowStart.yaml
---
# Ensure logged in
- runFlow: ../shared/_VietLocalGoLogin.yaml

# Try opening Notifications via Profile tab/menu (multiple fallbacks)
- tapOn:
        text: "Cá nhân"
        optional: true

- tapOn:
        text: "Profile"
        optional: true

# Wait briefly for profile to render
- waitForAnimationToEnd

# Tap notifications menu item (use testID that was added to menu item)
- tapOn:
        id: "profile-menu-notifications"
        optional: true

- waitForAnimationToEnd

# Verify Notifications screen is visible (optional - may not be reachable in some app states)
- assertVisible:
    id: "notifications-screen"
    optional: true

# If there are unread notifications, the banner should be visible
- assertVisible:
    id: "notifications-unread-banner"
    optional: true

# Tap the first notification (id=1 in mock data)
- tapOn:
    id: "notification-1"
    optional: true

# Expect navigation to Booking History (from booking notification)
- assertVisible:
    id: "booking-history-screen"
    optional: true

# Go back to Profile (skip explicit back tap if not available)
